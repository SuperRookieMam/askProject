(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{165:function(e,n,t){t(166),e.exports=t(383)},383:function(e,n,t){"use strict";t.r(n);t(152);var o=t(161),r=t.n(o),a=t(17),s=t(162),u=t(87),i=t(44),l=t(86),c=t.n(l),p=new u.a({base:"/food/",mode:"history"}),m=c.a.create();m.interceptors.request.use(function(e){if(U.commit("loading"),sessionStorage.getItem("token")){var n=JSON.parse(sessionStorage.getItem("token"));e.headers.Authorization="Bearer".concat(n.access_token)}if(sessionStorage.getItem("user")){var t=JSON.parse(sessionStorage.getItem("user"));e.headers.username="".concat(t.username),e.headers.password="".concat(t.password)}return e},function(e){return Promise.reject(e)}),m.interceptors.response.use(function(e){U.commit("loadingComplete");var n="与服务器交互时出现错误",t=e.status,o=e.data,r=e.error;return 200<=t&&t<300?o:(n+=",错误信息=[".concat(r,"]"),U.commit("addError",n),e)},function(e){if(U.commit("loadingComplete"),401===e.response.status){var n=encodeURI(window.location.href);sessionStorage.setItem("savedUrl",n),p.replace({name:"login"})}else U.commit("addError",e);return Promise.reject(e)});var f=m,d=t(66),h=t.n(d),g=c.a.create({transformRequest:[function(e,n){return h.a.stringify(e,{arrayFormat:"repeat"})}]}),v="/food/data1/",b={namespaced:!0,state:{loginType:"",url:{oautLogin:v+"oauth/token",userInfo:v+"userDetailes/userInfo",login:v+"login",logout:v+"logout"},oauth:{grant_type:"password",client_id:"2c9eaf716b9e9352016b9e9370190000",client_secret:"123456"}},getters:{loginType:function(e){return e.loginType}},mutations:{},actions:{login:function(e,n){var t=e.commit,o=e.state,r=o.url,a=o.loginType,s=o.oauth;if("oauth"!==a)return g.post(r.login,n).then(function(e){var n=e.data;return t("updateUser",n,{root:!0}),sessionStorage.setItem("user",JSON.stringify(n)),!0});var u={grant_type:s.grant_type,client_id:s.client_id,client_secret:s.client_secret,username:n.username,password:n.password};return g.post(r.oautLogin,u).then(function(e){var n=e.data;return t("updateToken",n,{root:!0}),sessionStorage.setItem("token",JSON.stringify(n)),g.get("".concat(r.userInfo,"?access_token=").concat(n.access_token)).then(function(e){var n=e.data;return t("updateUser",n.data,{root:!0}),sessionStorage.setItem("user",JSON.stringify(n.data)),!0})})}}},P=t(2),I=t.n(P),R="/food/data1/";a.default.use(i.b);var S="/food/data1/",U=new i.a({namespaced:!0,state:{serverName:"",user:{},token:{},error:{count:0,message:""},loadingCount:0,menus:[],url:{login:S+"login",logout:S+"logout"},serverMap:{oauthserver:"/food/data1/",ask:"/food/data1/"},currentServer:{}},getters:{menus:function(e){var n={},t={};e.menus.forEach(function(e){n.hasOwnProperty(e.pid)&&0!==e.pid?n[e.pid].push(e):0!==e.pid&&(n[e.pid]=[e]),t[e.id]=1});var o=[];return e.menus.forEach(function(e){e.submenus=n[e.id],0===e.pid?o.push(e):t.hasOwnProperty(e.pid)||o.push(e)}),o},token:function(e){return e.token},user:function(e){return e.user},currentServer:function(e){return e.currentServer},serverMap:function(e){return e.serverMap}},mutations:{updateTitle:function(e,n){var t=n.title;t&&(e.title=t)},switchTheme:function(e,n){e.theme=n},addError:function(e,n){var t=1+e.error.count,o=n;e.error={count:t,message:o}},updateUser:function(e,n){e.user=n},loading:function(e){e.loadingCount++,console.debug("after loading the loading count is ",e.loadingCount)},loadingComplete:function(e){e.loadingCount--,console.debug("after complete the loading count is ",e.loadingCount)},updateMenu:function(e,n){e.menus=n},updateToken:function(e,n){e.token=n},currentServer:function(e,n){e.currentServer=n}},actions:{loadMenu:function(e,n){var t=e.commit,o=(e.state.serverMap,n.url);return f.get("".concat(o)).then(function(e){var n=e.data;t("updateMenu",n)})}},modules:{Login:b,Formstate:new function e(){I()(this,e),this.namespaced=!0,this.state={data:{}},this.getters={data:function(e){return e.data}},this.mutations={data:function(e,n){e.data=n}},this.actions={get:function(e,n){e.commit,e.state;var t=n.url,o=n.params;return o?f.get("".concat(t,"?")+h.a.stringify(o)).then(function(e){return e}):f.get("".concat(t)).then(function(e){return e})},post:function(e,n){e.state;var t=n.url,o=n.params;return f.post("".concat(t),o).then(function(e){return e})},put:function(e,n){e.state;var t=n.url,o=n.params;return f.put("".concat(t),o).then(function(e){return e})},del:function(e,n){e.state;var t=n.url,o=n.params;return o?f.delete("".concat(t,"?")+h.a.stringify(o)).then(function(e){return e}):f.delete("".concat(t)).then(function(e){return e})},upfile:function(e,n){var t=this;e.state,n.file||this.$alert("请选择文件","友情提示",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"action: ".concat(e)})}});var o=new FormData;if(n.data)for(var r in n.data)o.append(r,n.data[r]);var a={"Content-Type":"multipart/form-data"},s=JSON.parse(sessionStorage.getItem("user"));if(a.username=s.username,a.password=s.password,n.headers)for(var u in n.headers)a[u]=n.data[u];var i="".concat(s.username)+"_"+(new Date).getMilliseconds();return o.append(i,n.file),f.post(n.action,o,{headers:a}).then(function(e){return n.onSuccess&&n.onSuccess(),e}).catch(function(e){n.onError&&n.onError()})}}},ServerMap:new function e(){I()(this,e),this.namespaced=!0,this.state={Url:{base:{fileServer:R,ask:R},file:{upload:"fileInfos",preview:"fileInfos",delete:"fileInfos",fileInfoUpdate:"fileInfos",fileInfoList:"fileInfos/list",fileInfoPage:"fileInfos/page"},ask:{menus:"menuFunctionRole/menus",menutreeList:"menuFunction/list",menutreeUpdate:"menuFunction",menuRoleList:"menuFunctionRole/list",menuRoleUpdate:"menuFunctionRole",menuRoleUpdateParams:"menuFunctionRole/params",oauthUserDetailsPage:"oAthUserDetailes/page",oauthUserDetailsUpdate:"oAthUserDetailes",oauthUserDetailsList:"oAthUserDetailes/list",roleList:"roleInfo/list",roleInfoPage:"roleInfo/page",roleInfoUpdate:"roleInfo",userRolePage:"userRole/page",userRoleUpdate:"userRole",userRoleList:"userRole/list",foodPage:"food/page",foodList:"food/list",foodUpdate:"food",examPage:"exam/page",examUpdate:"exam",examList:"exam/list",resultPage:"result/page",resultUpdate:"result"},resource:{resourceServer:"menuFunctionRoles/resourceServers"}}},this.getters={map:function(e){return e.map},url:function(e){return e.Url}}}}}),w={install:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f;e.prototype.$http=n,e.http=n}},y={namespaced:!0,state:{name:"nameState"},actions:{action1:function(){return"good"}},modules:{}},k=[{name:"login",path:"/login",component:function(){return t.e(0).then(t.bind(null,397))}},{name:"",path:"/",component:function(){return Promise.all([t.e(0),t.e(8)]).then(t.bind(null,385))},children:[{name:"menuFunctionRole",path:"/menuFunctionRole/:id",component:function(){return Promise.all([t.e(0),t.e(16)]).then(t.bind(null,388))}},{name:"menuFunctionRoles",path:"/menuFunctionRoles",component:function(){return Promise.all([t.e(0),t.e(17)]).then(t.bind(null,389))},props:!0},{name:"menuFunctions",path:"/menuFunctions",component:function(){return Promise.all([t.e(0),t.e(21)]).then(t.bind(null,390))}},{name:"menuFunction",path:"/menuFunction/:id",component:function(){return Promise.all([t.e(0),t.e(22)]).then(t.bind(null,391))},props:!0},{name:"menutree",path:"/menutree",component:function(){return Promise.all([t.e(0),t.e(10)]).then(t.bind(null,392))},props:!0},{name:"menuRoleTree",path:"/menuRoleTree",component:function(){return Promise.all([t.e(0),t.e(11)]).then(t.bind(null,393))},props:!0},{name:"food",path:"/food/:id",component:function(){return Promise.all([t.e(0),t.e(12)]).then(t.bind(null,394))},props:!0},{name:"foods",path:"/foods",component:function(){return Promise.all([t.e(0),t.e(13)]).then(t.bind(null,396))},props:!0},{name:"exam",path:"/exam/:id",component:function(){return t.e(0).then(t.bind(null,88))},props:!0},{name:"exams",path:"/exams",component:function(){return Promise.all([t.e(0),t.e(14)]).then(t.bind(null,386))},props:!0},{name:"result",path:"/result/:id",component:function(){return Promise.all([t.e(0),t.e(15)]).then(t.bind(null,399))},props:!0},{name:"results",path:"/results",component:function(){return Promise.all([t.e(0),t.e(23)]).then(t.bind(null,400))},props:!0},{name:"oAthUserDetailes",path:"/oAthUserDetailes/:id",component:function(){return Promise.all([t.e(0),t.e(9)]).then(t.bind(null,401))},props:!0},{name:"oAthUserDetailess",path:"/oAthUserDetailess",component:function(){return Promise.all([t.e(0),t.e(18)]).then(t.bind(null,402))},props:!0},{name:"roleInfo",path:"/roleInfo/:id",props:!0,component:function(){return Promise.all([t.e(0),t.e(1)]).then(t.bind(null,164))}},{name:"roleInfos",path:"/roleInfos",props:!0,component:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,403))}},{name:"userRole",path:"/userRole/:id",props:!0,component:function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,163))}},{name:"userRoles",path:"/userRoles",props:!0,component:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,398))}},{name:"record",path:"/record/:id",props:!0,component:function(){return Promise.all([t.e(0),t.e(19)]).then(t.bind(null,395))}},{name:"records",path:"/records",props:!0,component:function(){return Promise.all([t.e(0),t.e(20)]).then(t.bind(null,387))}},{name:"roleInfo",path:"/roleInfo/:id",props:!0,component:function(){return Promise.all([t.e(0),t.e(1)]).then(t.bind(null,164))}},{name:"roleInfos",path:"/roleInfos",props:!0,component:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,403))}},{name:"userRole",path:"/userRole/:id",props:!0,component:function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,163))}},{name:"userRoles",path:"/userRoles",props:!0,component:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,398))}}]}],F={install:function(e,n){var t=n.store;n.router.addRoutes(k),t.registerModule("admin",y)}};a.default.config.productionTip=!1,a.default.use(r.a),a.default.use(u.a),a.default.use(w,f),a.default.use(F,{store:U,router:p}),new a.default({router:p,store:U,render:function(e){return e(s.a)}}).$mount("#app")},45:function(e,n,t){"use strict";var o={};n.a={setParames:function(e,n){o[e]=n},getParames:function(e){return o[e]},beforeGetData:function(e,n){if(e)return n?e(n):e()},afterGetData:function(e,n){if(e)return n?e(n):e()},beforeSubmit:function(e,n){if(e)return n?e(n):e()},submitSucess:function(e,n){if(e)return n?e(n):e()},interruptJump:function(e,n){if(e)return n?e(n):e()}}}},[[165,6,0,7]]]);